<main id="cart_page">
    <header class="page-header-bg-light" style="height: 120px;">
        <h1>Cart</h1>
    </header>
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <% if cart.empty? %>
                <p>No items in cart</p>
                <%= link_to 'Go to store', characters_path %>
                <% end %>
                <% cart.each_with_index do |character, i| %>
                <span class="text-small">
                    <i class="bi bi-person-vcard"></i>
                    Item <%=i+1%>
                </span>
                <div class="card row mb-3 overflow-hidden" style="height: 160px;">
                    <div class="col-3 p-0 cart-item-image">
                        <% if session[:cart][i]['image'].present? %>
                        <%= image_tag character.image, :class => 'img-fluid', alt: character.name %>
                        <% else %>
                        <%= image_tag("empty_image.jpg") %>
                        <% end %>
                    </div>
                    <div class="col-9">
                        <div class="card-body">
                            <h2 class="h4"><%=character.name%></h2>

                            <%= form_with url: update_cart_item_path, method: :post do %>
                            <%= hidden_field_tag(:character_id, character.id) %>
                            <div class="input-group" style="max-width: 220px;">
                                <input type="number" min="1" max="100" name="quantity" class="form-control"
                                    id="cart_quantity" value="<%=session[:cart][i]['quantity']%>">
                                <%= button_tag 'Update item', class: "btn btn-outline-primary btn-sm"%>
                            </div>
                            <% end %>
                        </div>
                        <div class=" card-footer">
                            <%= button_to cart_path(character), method: :delete, class: "btn btn-sm btn-light" do %>
                            <%= hidden_field_tag(:character_id, character.id) %>
                            <i class="bi bi-x-lg text-danger"></i>
                            Remove item
                            <% end %>
                        </div>
                    </div>
                </div>
                <% end %>
            </div>
            <div class="col-md-4">
                <div class="card">
                    total_area
                </div>
            </div>
        </div>
    </div>
</main>